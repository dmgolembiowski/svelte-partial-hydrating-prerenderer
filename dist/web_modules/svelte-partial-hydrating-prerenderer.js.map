{"version":3,"file":"svelte-partial-hydrating-prerenderer.js","sources":["../../../node_modules/svelte-partial-hydrating-prerenderer/lib/Hydrate.svelte"],"sourcesContent":["<script context=\"module\">\n    const mountedNodes = {};\n    const nodeProps = {};\n    const scriptNodes = {};\n    let ssgIdCounter = 0;\n\n    function markHydratableComponent(fileUrl, node, componentProps) {\n        // Ignore if not in prerender mode\n        if (!window.__PRERENDER_MODE__) return;\n\n        mountedNodes[fileUrl] = mountedNodes[fileUrl] || [];\n\n        // Prevent infinitely remounting\n        if (node.dataset.ssgref) return;\n        mountedNodes[fileUrl].push(node);\n\n        const ssgRef = ssgIdCounter++;\n        // A parent can only have ONE hydratable child which is why this component renders\n        // a div wrapper. Hydratable components also must have ONE root element inside their\n        // component, not multiple.\n        node.dataset.ssgref = ssgRef;\n        nodeProps[ssgRef] = componentProps;\n\n        createComponentLoaderScript(fileUrl);\n    }\n\n    function createComponentLoaderScript(fileUrl) {\n        const targets = mountedNodes[fileUrl].map(n => {\n            const ssgRef = n.dataset.ssgref;\n            return `\n                new c({\n                    target: document.querySelector('[data-ssgref=\"${ssgRef}\"]'),\n                    hydrate: true,\n                    props: ${JSON.stringify(nodeProps[ssgRef])}\n                });\n            `;\n        });\n\n        // If a script node was already created for this fileUrl, remove it\n        // and create a new one with the new target included. All targets\n        // share a single script node.\n        if (scriptNodes[fileUrl]) {\n            document.body.removeChild(scriptNodes[fileUrl]);\n        }\n\n        const s = document.createElement('script');\n        s.type = 'module';\n        const code = `\n            import c from '${fileUrl}';\n            ${targets.join('\\n')}\n        `;\n\n        s.appendChild(document.createTextNode(code));\n        document.body.appendChild(s);\n        scriptNodes[fileUrl] = s;\n    }\n</script>\n\n<script>\n    // The component's file url for import\n    export let _this;\n    // Style attribute to apply to the wrapping div\n    export let _style = null;\n    // Class attribute to apply to the wrapping div\n    export let _class = null;\n\n    let componentProps;\n    let node;\n\n    $: {\n        // Capture all other props except _this (component's import url)\n        componentProps = Object.assign({}, $$props);\n        delete componentProps['_this'];\n    }\n\n    $: importComponent = _this && import(_this);\n\n    $: _this &&\n        node &&\n        componentProps &&\n        markHydratableComponent(_this, node, componentProps);\n</script>\n\n<div bind:this={node} class={_class} style={_style}>\n    {#if importComponent}\n        {#await importComponent then loadedComponent}\n            <svelte:component\n                this={loadedComponent.default}\n                {...componentProps} />\n        {/await}\n    {/if}\n</div>\n"],"names":["ctx","default","mountedNodes","nodeProps","scriptNodes","ssgIdCounter","markHydratableComponent","fileUrl","node","componentProps","window","__PRERENDER_MODE__","dataset","ssgref","push","ssgRef","targets","map","n","JSON","stringify","document","body","removeChild","s","createElement","type","code","join","appendChild","createTextNode","createComponentLoaderScript","_this","_style","_class","Object","assign","$$props","importComponent"],"mappings":"qUAqFgBA,8KAAAA,6RAGIA,YADEA,KAAgBC,iPAClBD,qBADEA,KAAgBC,iVAH7BD,sJADoBA,kBAAeA,6DACnCA,qHADoBA,6BAAeA,qFAlFlCE,KACAC,KACAC,SACFC,EAAe,WAEVC,EAAwBC,EAASC,EAAMC,OAEvCC,OAAOC,6BAEZT,EAAaK,GAAWL,EAAaK,OAGjCC,EAAKI,QAAQC,cACjBX,EAAaK,GAASO,KAAKN,SAErBO,EAASV,IAIfG,EAAKI,QAAQC,OAASE,EACtBZ,EAAUY,GAAUN,WAKaF,SAC3BS,EAAUd,EAAaK,GAASU,IAAIC,UAChCH,EAASG,EAAEN,QAAQC,6GAG+BE,0EAEvCI,KAAKC,UAAUjB,EAAUY,2CAQ1CX,EAAYG,IACZc,SAASC,KAAKC,YAAYnB,EAAYG,UAGpCiB,EAAIH,SAASI,cAAc,UACjCD,EAAEE,KAAO,eACHC,kCACepB,oBACfS,EAAQY,KAAK,kBAGnBJ,EAAEK,YAAYR,SAASS,eAAeH,IACtCN,SAASC,KAAKO,YAAYL,GAC1BpB,EAAYG,GAAWiB,EA/BvBO,CAA4BxB,yBAf5BE,EACAD,WAPOwB,aAEAC,EAAS,gBAETC,EAAS,+JAOhBzB,EAAiB0B,OAAOC,UAAWC,WAC5B5B,EAAsB,yBAG9B6B,EAAkBN,UAAgBA,mBAElCA,GACCxB,GACAC,GACAH,EAAwB0B,EAAOxB,EAAMC,qEA6D7BD"}